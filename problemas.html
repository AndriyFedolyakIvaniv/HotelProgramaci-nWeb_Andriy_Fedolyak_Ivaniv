<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Problemas</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <nav>
        <ul class="menu">
            <li><a href="index.html">Inicio</a></li>
            <li><a href="base_de_datos.html">Base de datos</a></li>
            <li>
                <a href="#">Controles</a>
                <ul class="submenu">
                    <li><a href="control1.html">Registro</a></li>
                    <li><a href="control2.html">Reservas</a></li>
                    <li><a href="control3.html">Facturas</a></li>
                    <li><a href="control4.html">Crear Tareas</a></li>
                    <li><a href="control5.html">Modificar Tareas</a></li>
                </ul>
            </li>
        </ul>
    </nav>
<div class="container">
    <h1>Errores del Proyecto</h1>
    <p>Aquí se documentan los errores encontrados durante el desarrollo del proyecto, junto con sus soluciones.</p>
    <div class="error-list">
        <div class="error-item">
            <h2>Error 1: Consulta SQL incorrecta</h2>
            <p><strong>Problema:</strong> La consulta SQL no incluía el apellido del empleado al seleccionar datos de la tabla persona.</p>
            <p><strong>Solución:</strong> Se implementó un JOIN entre las tablas empleat y persona para obtener id_empleat, nombre y apellido.</p>
        </div>
        <div class="error-item">
            <h2>Error 2: BorderPane y MenuBar</h2>
            <p><strong>Problema:</strong> El MenuBar desaparecía al cargar la vista del registro.</p>
            <p><strong>Solución:</strong> Se actualizó el código para modificar solo la parte central del BorderPane sin reemplazar toda la escena.</p>
        </div>
        <div class="error-item">
            <h2>Error 3: Método assignarEmpleatTasca()</h2>
            <p><strong>Problema:</strong> El método esperaba IDs pero ahora recibía nombres, causando un error en la inserción.</p>
            <p><strong>Solución:</strong> Se agregó la recuperación tanto del id_empleat como del nombre y apellido del empleado.</p>
        </div>
        <div class="error-item">
            <h2>Error 4: Guardar empleados/clientes</h2>
            <p><strong>Problema:</strong> Los datos no se insertaban en la base de datos por un desajuste en los nombres de columnas.</p>
            <p><strong>Solución:</strong> Se revisaron los nombres de atributos y se ajustó la consulta SQL para coincidir con la estructura de la base de datos.</p>
        </div>
        <div class="error-item">
            <h2>Error 5: Conversión de números (parseDouble)</h2>
            <p><strong>Problema:</strong> Double.parseDouble() no reconocía la coma (,) como separador decimal.</p>
            <p><strong>Solución:</strong> Se reemplazó la coma por un punto antes de convertir el valor.</p>
        </div>
        <div class="error-item">
            <h2>Error 6: Subconsulta SQL</h2>
            <p><strong>Problema:</strong> La subconsulta devolvía más de una fila, causando un error SQL.</p>
            <p><strong>Solución:</strong> Se agregó LIMIT 1 y se ajustó la lógica para usar un campo único.</p>
        </div>
        <div class="error-item">
            <h2>Error 7: Exclusión de estado COMPLETADA en ComboBox</h2>
            <p><strong>Problema:</strong> El ComboBox mostraba todos los valores del enum Estat_Tasca, incluyendo "COMPLETADA".</p>
            <p><strong>Solución:</strong> Se filtraron los valores del enum para incluir solo "PENDENT" y "EN PROCES".</p>
        </div>
        <div class="error-item">
            <h2>Error 8: Uso de enum para el método de pago</h2>
            <p><strong>Problema:</strong> Se usaban strings en lugar de un enum, lo que podía causar errores.</p>
            <p><strong>Solución:</strong> Se implementó un ComboBox que usa un enum Metode_Pagament.</p>
        </div>
        <div class="error-item">
            <h2>Error 9: Precios de reserva incorrectos</h2>
            <p><strong>Problema:</strong> El precio de "AD" podía ser menor que el de "MP".</p>
            <p><strong>Solución:</strong> Se implementó una validación para garantizar que "AD" sea siempre mayor que "MP".</p>
        </div>
        <div class="error-item">
            <h2>Error 10: Método initialize() en JavaFX</h2>
            <p><strong>Problema:</strong> El método estaba declarado como private y no se ejecutaba correctamente.</p>
            <p><strong>Solución:</strong> Se cambió la visibilidad de private a public.</p>
        </div>
        <div class="error-item">
            <h2>Error 11: Conexión a la base de datos</h2>
            <p><strong>Problema:</strong> Se creaban múltiples conexiones en lugar de reutilizar una.</p>
            <p><strong>Solución:</strong> Se implementó una conexión única compartida para mejorar el rendimiento.</p>
        </div>
        <div class="error-item">
            <h2>Error 12: No comprobación del DNI, si ya existe</h2>
            <p><strong>Problema:</strong> El sistema no verificaba si el DNI ya estaba registrado, lo que podía resultar en la creación de registros duplicados.</p>
            <p><strong>Solución:</strong> Se implementó una validación previa para comprobar si el DNI ya existe en la base de datos, evitando así la creación de registros duplicados.</p>
        </div>
        <div class="error-item">
            <h2>Error 13: Comprobación de las fechas de la reserva</h2>
            <p><strong>Problema:</strong> El sistema no verificaba si las fechas de la nueva reserva coincidían con las fechas de una reserva ya existente, lo que podía generar conflictos o duplicados.</p>
            <p><strong>Solución:</strong> Se implementó una validación para comprobar que las fechas seleccionadas no coincidan con las de una reserva ya existente, mostrando un mensaje de error si las fechas están ocupadas. El usuario deberá elegir un rango de fechas disponible para proceder con la reserva.</p>
        </div>        
    </div>
</div>
</body>
</html>
